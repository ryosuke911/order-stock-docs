# 発注データ更新画面

## 基本情報
| 項目 | 内容 |
|------|------|
| ID | SCR-052 |
| 分類 | 発注管理 |
| 概要 | 登録済みの発注データを更新する画面。 |

## 構成要素
発注先選択ドロップダウン、商品選択ドロップダウン、数量入力フィールド、納期カレンダー、発注担当者選択ドロップダウン、更新ボタン、クリアボタン

## 操作手順
1. 更新する発注データを選択。
2. 必要に応じて発注先、商品、数量、納期、担当者を修正。
3. 更新ボタンをクリック。

## アクセス権限
| 項目 | 内容 |
|------|------|
| 利用者 | 購買担当者 |
| 権限 | loged-in user |

## 関連ファイル
| 項目 | 内容 |
|------|------|
| ファイル名 | /orders/[orderId]/edit.tsx |
| 入力 | [{table:"orders",items:["order_id","product_code","order_quantity","supplier","delivery_date","order_date","order_status","order_supplier"]}, {table:"products",items:["product_code","product_name"]}, {table:"suppliers",items:["supplier_id","supplier_name"]}] |
| 出力 | [{table:"orders",items:["order_id","product_code","order_quantity","supplier","delivery_date","order_date","order_status","order_supplier"]}] |
| 共通コンポーネントファイル | [\"Header.tsx\", \"Footer.tsx\", \"Navigation.tsx\"] |

## 入力項目の詳細仕様
| フィールド | 必須 | 型 | 制限 |
|------------|------|-----|------|
| 発注番号 | - | テキスト（表示のみ） | - |
| 発注日 | - | 日付（表示のみ） | YYYY/MM/DD形式 |
| 発注先 | ○ | ドロップダウン | 登録済み発注先から選択 |
| 商品情報 | - | テーブル | - |
| - 商品コード | ○ | ドロップダウン | 登録済み商品から選択 |
| - 商品名 | - | テキスト（表示のみ） | - |
| - 発注数量 | ○ | 数値入力 | 1以上の整数 |
| - 単価 | - | 数値（表示のみ） | - |
| - 金額 | - | 数値（表示のみ） | - |
| - 削除ボタン | - | ボタン | クリック可能状態であること |
| 商品追加ボタン | - | ボタン | クリック可能状態であること |
| 納期 | ○ | 日付入力 | 本日以降の日付 |
| 発注担当者 | ○ | ドロップダウン | ログインユーザーがデフォルト |
| 備考 | - | テキストエリア | 最大500文字 |
| 更新ボタン | - | ボタン | クリック可能状態であること |
| クリアボタン | - | ボタン | クリック可能状態であること |

## 入力値の検証ルール
1. 発注先
   - 必須選択チェック
   - 選択値の有効性チェック
2. 商品情報
   - 商品コード必須チェック
   - 発注数量必須チェック
   - 発注数量の数値範囲チェック（1以上）
   - 商品の重複チェック
3. 納期
   - 必須入力チェック
   - 日付形式チェック
   - 日付範囲チェック（本日以降）
4. 発注担当者
   - 必須選択チェック
   - 選択値の有効性チェック
5. 備考
   - 文字数チェック（最大500文字）
6. 更新操作
   - ユーザー権限チェック
   - 必須項目入力済みチェック
   - データ整合性チェック

## エラーメッセージ一覧
| エラー内容 | メッセージ |
|------------|------------|
| 発注先未選択 | 「発注先を選択してください」 |
| 商品未選択 | 「商品を選択してください」 |
| 商品重複 | 「同じ商品が既に追加されています」 |
| 発注数量未入力 | 「発注数量を入力してください」 |
| 発注数量不正 | 「発注数量は1以上の整数を入力してください」 |
| 納期未入力 | 「納期を入力してください」 |
| 納期不正 | 「納期は本日以降の日付を指定してください」 |
| 発注担当者未選択 | 「発注担当者を選択してください」 |
| 備考文字数超過 | 「備考は500文字以内で入力してください」 |
| データ取得エラー | 「発注データの取得に失敗しました」 |
| 更新エラー | 「発注データの更新に失敗しました」 |
| 権限エラー | 「この機能の利用権限がありません」 |
| システムエラー | 「システムエラーが発生しました。管理者に連絡してください」 |

## 画面遷移
| アクション | 遷移先 |
|------------|--------|
| 更新ボタン押下（成功時） | 発注データ更新完了画面 |
| 更新ボタン押下（失敗時） | 同画面（エラーメッセージ表示） |
| クリアボタン押下 | 同画面（入力値をクリア） |
| キャンセルボタン押下 | 発注一覧画面 |

## 更新履歴
| 更新日 | 更新内容 | 更新者 |
|--------|----------|--------|
| 2024/03/19 | 入力項目の詳細仕様・検証ルール・エラーメッセージ・画面遷移情報を追加 | システム開発者 |
