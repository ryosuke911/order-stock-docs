# 画面定義書更新ワークフロー

## 重要な注意事項
- 既存の内容は一切変更しない（以下の5つのセクションは変更禁止）：
  1. 基本情報
  2. 構成要素
  3. 操作手順
  4. アクセス権限
  5. 関連ファイル
- 関連ファイル内のJSON形式は整形のみ許可（`\"` → `"`）
- 以下の4つのセクションのみを追加する：
  1. 入力項目の詳細仕様
  2. 入力値の検証ルール
  3. エラーメッセージ一覧
  4. 画面遷移

## 更新手順

### 1. 既存内容の確認
1. 対象の画面定義書（`XXX_画面定義書.md`）を開く
2. 既存の5つのセクションの内容を確認
3. 関連ファイルのJSONがエスケープされている場合は整形

### 2. 入力項目の詳細仕様の追加
```markdown
## 入力項目の詳細仕様
| フィールド | 必須 | 型 | 制限 |
|------------|------|-----|------|
| {フィールド名} | ○/- | {データ型} | {制限事項} |
```

#### データ型の例
- テキスト入力：半角英数字、全角文字
- 数値入力：半角数字
- 選択式：ドロップダウン、チェックボックス、ラジオボタン
- 日付：日付
- 表示要素：テーブル、グラフ、テキスト（表示のみ）
- 操作要素：ボタン、リンク

#### 制限の例
- 文字数：最大XX文字
- 数値範囲：1以上の整数、在庫数以下
- 日付範囲：本日以前/以後の日付
- 選択制限：登録済みXXから選択
- 表示制限：ソート可能、ページング機能あり
- 状態制限：クリック可能状態であること

### 3. 入力値の検証ルールの追加
```markdown
## 入力値の検証ルール
1. {フィールド名}
   - {検証ルール1}
   - {検証ルール2}
```

#### 検証ルールの例
- 必須チェック：必須入力/選択チェック
- 形式チェック：半角英数字チェック、数値チェック、日付形式チェック
- 範囲チェック：文字数チェック、数値範囲チェック、日付範囲チェック
- 存在チェック：商品コード存在チェック、在庫数チェック
- 状態チェック：ボタン/リンクのクリック可能状態チェック
- 権限チェック：ユーザー権限に応じた表示/操作チェック

### 4. エラーメッセージ一覧の追加
```markdown
## エラーメッセージ一覧
| エラー内容 | メッセージ |
|------------|------------|
| {エラー内容} | 「{エラーメッセージ}」 |
```

#### エラーメッセージの例
- 必須エラー：「{項目名}は必須入力です」
- 形式エラー：「{項目名}は{文字種}で入力してください」
- 範囲エラー：「{項目名}は{制限内容}で入力してください」
- 存在エラー：「入力された{項目名}は存在しません」
- 処理エラー：「{処理名}に失敗しました。再度実行してください」
- 権限エラー：「この機能へのアクセス権限がありません」

### 5. 画面遷移の追加
```markdown
## 画面遷移
| アクション | 遷移先 |
|------------|--------|
| {アクション} | {遷移先画面名} |
```

#### 主要なアクション例
- ボタン押下時：登録、更新、削除、検索
- リンク押下時：メニュー、詳細表示、一覧表示
- 処理結果：成功時、失敗時、確認時
- 共通操作：キャンセル時、ログアウト時

### 6. 更新履歴の追加
```markdown
## 更新履歴
| 更新日 | 更新内容 | 更新者 |
|--------|----------|--------|
| YYYY/MM/DD | 入力項目の詳細仕様・検証ルール・エラーメッセージ・画面遷移情報を追加 | 担当者名 |
```

## 品質チェック項目
1. 既存の5つのセクションが変更されていないことを確認
2. 4つの新しいセクションが適切に追加されていることを確認
3. 各セクションの内容が画面の機能要件と整合していることを確認
4. エラーメッセージが分かりやすい日本語で記述されていることを確認
5. 画面遷移が画面遷移図と整合していることを確認
6. 更新履歴が正しく記録されていることを確認