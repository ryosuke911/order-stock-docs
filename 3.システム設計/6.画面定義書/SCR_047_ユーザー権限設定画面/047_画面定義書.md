# ユーザー権限設定画面

## 基本情報
| 項目 | 内容 |
|------|------|
| ID | SCR-047 |
| 分類 | アクセス権限管理 |
| 概要 | ユーザーのメニューやデータの閲覧・編集権限を設定する画面。 |

## 構成要素
ユーザーID検索フォーム、権限設定チェックボックス、保存ボタン

## 操作手順
1. ユーザーIDを検索します。
2. 権限をチェックボックスで設定します。
3. 保存ボタンをクリックします。

## アクセス権限
| 項目 | 内容 |
|------|------|
| 利用者 | 管理者 |
| 権限 | loged-in user |

## 関連ファイル
| 項目 | 内容 |
|------|------|
| ファイル名 | /access-control/set-user-permissions.tsx |
| 入力 | [{table:"users",items:["user_id","username","role"]}] |
| 出力 | [{table:"users",items:["user_id","role"]}] |
| 共通コンポーネントファイル | ヘッダー、フッター、サイドメニュー |

## 入力項目の詳細仕様
| フィールド | 必須 | 型 | 制限 |
|------------|------|-----|------|
| ユーザーID検索 | ○ | テキスト入力 | 半角英数字、4文字以上20文字以内 |
| 検索ボタン | - | ボタン | クリック可能状態であること |
| ユーザー情報表示 | - | テキスト（表示のみ） | ユーザーID、氏名、所属部署を表示 |
| 権限設定 | ○ | チェックボックスグループ | 複数選択可能 |
| - 在庫管理権限 | - | チェックボックス | 選択/未選択 |
| - 発注管理権限 | - | チェックボックス | 選択/未選択 |
| - アラート設定権限 | - | チェックボックス | 選択/未選択 |
| - ユーザー管理権限 | - | チェックボックス | 選択/未選択 |
| - レポート出力権限 | - | チェックボックス | 選択/未選択 |
| 保存ボタン | - | ボタン | クリック可能状態であること |

## 入力値の検証ルール
1. ユーザーID検索
   - 必須入力チェック
   - 半角英数字チェック
   - 文字数チェック（4-20文字）
   - 存在チェック
2. 権限設定
   - 必須選択チェック（1つ以上）
   - 選択値の有効性チェック
   - 権限の組み合わせ整合性チェック
3. 保存操作
   - ユーザー権限チェック
   - 必須項目入力済みチェック

## エラーメッセージ一覧
| エラー内容 | メッセージ |
|------------|------------|
| ユーザーID未入力 | 「ユーザーIDを入力してください」 |
| ユーザーID形式不正 | 「ユーザーIDは半角英数字で入力してください」 |
| ユーザーID文字数不正 | 「ユーザーIDは4文字以上20文字以内で入力してください」 |
| ユーザーID不存在 | 「指定されたユーザーIDは存在しません」 |
| 権限未選択 | 「権限を1つ以上選択してください」 |
| 権限組み合わせ不正 | 「選択された権限の組み合わせが不正です」 |
| 保存エラー | 「権限設定の保存に失敗しました」 |
| 権限エラー | 「この機能の利用権限がありません」 |
| システムエラー | 「システムエラーが発生しました。管理者に連絡してください」 |

## 画面遷移
| アクション | 遷移先 |
|------------|--------|
| 検索ボタン押下 | 同画面（検索結果表示） |
| 保存ボタン押下（成功時） | 権限設定完了画面 |
| 保存ボタン押下（失敗時） | 同画面（エラーメッセージ表示） |
| キャンセルボタン押下 | ユーザー一覧画面 |

## 更新履歴
| 更新日 | 更新内容 | 更新者 |
|--------|----------|--------|
| 2024/03/19 | 入力項目の詳細仕様・検証ルール・エラーメッセージ・画面遷移情報を追加 | システム開発者 |
