# 納期リマインド

## 基本情報
| 項目 | 内容 |
|------|------|
| ID | SCR-069 |
| 分類 | 発注管理 |
| 概要 | 発注商品の納期が近づいた際に担当者へ通知する機能。 |

## 構成要素
リマインド通知

## 操作手順
システムが自動で通知。

## アクセス権限
| 項目 | 内容 |
|------|------|
| 利用者 | システム |
| 権限 | loged-in user |

## 関連ファイル
| 項目 | 内容 |
|------|------|
| ファイル名 | N/A |
| 入力 | [{table:"orders",items:["order_id","delivery_date", "product_code"]}] |
| 出力 | [] |
| 共通コンポーネントファイル | [] |

## 入力項目の詳細仕様
| フィールド | 必須 | 型 | 制限 |
|------------|------|-----|------|
| リマインド設定 | - | グループ | - |
| - リマインド日数 | ○ | 数値入力 | 1-30の整数 |
| - 通知方法 | ○ | チェックボックス | 以下から複数選択：「システム通知」「メール」 |
| - 通知先メールアドレス | △ | テキスト入力 | メール通知選択時は必須、メールアドレス形式 |
| リマインド一覧 | - | テーブル（表示のみ） | ソート可能、ページング機能あり |
| - 発注番号 | - | テキスト（表示のみ） | - |
| - 商品コード | - | テキスト（表示のみ） | - |
| - 商品名 | - | テキスト（表示のみ） | - |
| - サプライヤー名 | - | テキスト（表示のみ） | - |
| - 納期 | - | 日付（表示のみ） | YYYY/MM/DD形式 |
| - 残日数 | - | 数値（表示のみ） | - |
| - 発注状況 | - | テキスト（表示のみ） | - |
| - 詳細リンク | - | リンク | クリック可能状態であること |
| 設定保存ボタン | - | ボタン | クリック可能状態であること |

## 入力値の検証ルール
1. リマインド日数
   - 必須入力チェック
   - 数値範囲チェック（1-30）
2. 通知方法
   - 必須選択チェック
   - 少なくとも1つ以上選択チェック
3. 通知先メールアドレス
   - メール通知選択時の必須入力チェック
   - メールアドレス形式チェック
4. 設定保存操作
   - ユーザー権限チェック
   - 入力値の整合性チェック

## エラーメッセージ一覧
| エラー内容 | メッセージ |
|------------|------------|
| リマインド日数未入力 | 「リマインド日数を入力してください」 |
| リマインド日数範囲外 | 「リマインド日数は1から30の間で指定してください」 |
| 通知方法未選択 | 「通知方法を1つ以上選択してください」 |
| メールアドレス未入力 | 「メール通知を選択した場合は、メールアドレスを入力してください」 |
| メールアドレス形式不正 | 「正しいメールアドレス形式で入力してください」 |
| データ取得エラー | 「リマインド対象データの取得に失敗しました」 |
| 設定保存エラー | 「リマインド設定の保存に失敗しました」 |
| 権限エラー | 「この機能の利用権限がありません」 |
| システムエラー | 「システムエラーが発生しました。管理者に連絡してください」 |

## 画面遷移
| アクション | 遷移先 |
|------------|--------|
| 詳細リンク押下 | 発注詳細画面 |
| 設定保存ボタン押下（成功時） | 同画面（完了メッセージ表示） |
| 設定保存ボタン押下（失敗時） | 同画面（エラーメッセージ表示） |

## 更新履歴
| 更新日 | 更新内容 | 更新者 |
|--------|----------|--------|
| 2024/03/19 | 入力項目の詳細仕様・検証ルール・エラーメッセージ・画面遷移情報を追加 | システム開発者 |
