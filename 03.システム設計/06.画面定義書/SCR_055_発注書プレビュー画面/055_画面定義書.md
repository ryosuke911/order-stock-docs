# 発注書プレビュー画面

## 基本情報
| 項目 | 内容 |
|------|------|
| ID | SCR-055 |
| 分類 | 発注管理 |
| 概要 | 生成された発注書の内容をプレビュー表示する画面。 |

## 構成要素
発注書プレビュー表示、出力ボタン、発注書自動生成画面へのリンク

## 操作手順
1. 発注書の内容を確認。
2. 問題なければ出力ボタンをクリック。
3. 発注書出力画面へ遷移。

## アクセス権限
| 項目 | 内容 |
|------|------|
| 利用者 | 購買担当者 |
| 権限 | loged-in user |

## 関連ファイル
| 項目 | 内容 |
|------|------|
| ファイル名 | order-form-preview.tsx |
| 入力 | [] |
| 出力 | [] |
| 共通コンポーネントファイル | [\"Header.tsx\", \"Footer.tsx\", \"Navigation.tsx\"] |

## 入力項目の詳細仕様
| フィールド | 必須 | 型 | 制限 |
|------------|------|-----|------|
| プレビュー表示 | - | PDF表示（表示のみ） | 拡大・縮小・ページ送り可能 |
| 発注書情報表示 | - | テーブル（表示のみ） | - |
| - 発注番号 | - | テキスト（表示のみ） | - |
| - 発注日 | - | 日付（表示のみ） | YYYY/MM/DD形式 |
| - 発注先名 | - | テキスト（表示のみ） | - |
| - ページ数 | - | 数値（表示のみ） | - |
| 出力形式 | ○ | ラジオボタン | 以下から選択：「PDF」「Excel」 |
| 出力ボタン | - | ボタン | クリック可能状態であること |
| 再生成ボタン | - | ボタン | クリック可能状態であること |
| メール送信ボタン | - | ボタン | クリック可能状態であること |

## 入力値の検証ルール
1. プレビュー表示
   - データ表示整合性チェック
   - 表示データの完全性チェック
2. 出力形式
   - 必須選択チェック
   - 選択値の有効性チェック
3. 出力操作
   - ユーザー権限チェック
   - データ整合性チェック
4. メール送信操作
   - ユーザー権限チェック
   - 発注先メールアドレス存在チェック

## エラーメッセージ一覧
| エラー内容 | メッセージ |
|------------|------------|
| プレビュー表示エラー | 「発注書のプレビュー表示に失敗しました」 |
| 出力形式未選択 | 「出力形式を選択してください」 |
| データ取得エラー | 「発注書データの取得に失敗しました」 |
| 出力エラー | 「発注書の出力に失敗しました」 |
| 再生成エラー | 「発注書の再生成に失敗しました」 |
| メール送信エラー | 「発注書のメール送信に失敗しました」 |
| メールアドレス未登録 | 「発注先のメールアドレスが登録されていません」 |
| 権限エラー | 「この機能の利用権限がありません」 |
| システムエラー | 「システムエラーが発生しました。管理者に連絡してください」 |

## 画面遷移
| アクション | 遷移先 |
|------------|--------|
| 出力ボタン押下（成功時） | ファイルダウンロード |
| 出力ボタン押下（失敗時） | 同画面（エラーメッセージ表示） |
| 再生成ボタン押下 | 発注書自動生成画面 |
| メール送信ボタン押下（成功時） | 同画面（完了メッセージ表示） |
| メール送信ボタン押下（失敗時） | 同画面（エラーメッセージ表示） |
| キャンセルボタン押下 | 発注一覧画面 |

## 更新履歴
| 更新日 | 更新内容 | 更新者 |
|--------|----------|--------|
| 2024/03/19 | 入力項目の詳細仕様・検証ルール・エラーメッセージ・画面遷移情報を追加 | システム開発者 |
